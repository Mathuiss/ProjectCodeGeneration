<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>NFBC HOME</title>

    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script>
        if (sessionStorage.getItem('sessionToken') == null) {
            location.href = "index.html";
        }
    </script>
</head>

<body>
    <input id="logout" type="submit" value="logout">
    <input id="users" type="submit" value="users">

    <input type="submit" value="Transactions" id="redirect-transactions">
</body>


<script>
    document.getElementById("redirect-transactions").addEventListener("click", function () {
        location.href = "transactions.html";
    });

    document.getElementById("users").addEventListener("click", function () {
        location.href = "users.html";
    });

    document.getElementById("logout").addEventListener("click", function () {
        var url = "/logout"

        var body = {
            "active": sessionStorage.getItem('active'),
            "sessionToken": sessionStorage.getItem('sessionToken'),
            "user": sessionStorage.getItem('user'),
            "userRole": sessionStorage.getItem('userRole'),
            "timestamp": sessionStorage.getItem('timestamp'),
            "isActive": sessionStorage.getItem('isActive')
        };

        $.ajax({
            method: "POST",
            url: url,
            body: JSON.stringify(body),
            contentType: "application/json",
            success: function (success) {
                $("#result").text((success));

                sessionStorage.clear();
                location.href = "index.html";
            },
            statusCode: {
                400: function () {
                    //alert("Bad request");

                    sessionStorage.clear();
                    location.href = "index.html";
                },
                401: function () {
                    alert("Unauthorized");

                    sessionStorage.clear();
                    location.href = "index.html";
                }
            }
        })
    });
</script>

</html>