<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>NFBC HOME</title>

    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script>
        if (sessionStorage.getItem('ApiKeyAuth') == null) {
            location.href = "index.html";
        }
    </script>
</head>

<body>
    <!--<input id="Logout" type="submit" value="Logout">
    <input id="test" type="test" value="test">
    <input id="Logout" type="submit" value="Logout">-->

    <input id="logout" type="submit" value="Logout">
    <input id="users" type="submit" value="users">

    <input type="submit" value="Transactions" id="redirect-transactions">
</body>


<script>
    document.getElementById("redirect-transactions").addEventListener("click", function () {
        location.href = "transactions.html";
    });
    document.getElementById("logout").addEventListener("click", function () {

    document.getElementById("users").addEventListener("click", function () {
        location.href = "users.html";
    });

        //var url = "http://localhost:8080/logout";
        var url = "/logout";

        $("#logout").click(function (e) {
            e.preventDefault();
            var body = {
                "sessionToken": sessionStorage.getItem('ApiKeyAuth'),
                "user": sessionStorage.getItem('user'),
                "userRole": sessionStorage.getItem('userRole'),
                "timestamp": sessionStorage.getItem('timestamp'),
                "isActive": sessionStorage.getItem('isActive')

            };

            $.ajax({
                method: "POST",
                url: url,
                body: JSON.stringify(body),
                contentType: "application/json",
                success: function (success) {
                    $("#result").text((success));

                    sessionStorage.clear();
                    location.href = "index.html";

                    //alert(sessionStorage.getItem('ApiKeyAuth'));
                },
                statusCode: {
                    400: function () {
                        alert("Bad request");

                        sessionStorage.clear();
                        location.href = "index.html";
                    },
                    401: function () {
                        alert("Unauthorized");

                        sessionStorage.clear();
                        location.href = "index.html";
                    }
                }
            })
        });
    });
    ;



</script>

</html>